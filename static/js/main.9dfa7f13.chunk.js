(this["webpackJsonparoon-trivia-ui"]=this["webpackJsonparoon-trivia-ui"]||[]).push([[0],{178:function(e,t,n){e.exports=n(378)},183:function(e,t,n){},184:function(e,t,n){e.exports=n.p+"static/media/logo.ee7cd8ed.svg"},185:function(e,t,n){},312:function(e,t){},378:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(25),o=n.n(r),i=(n(183),n(61)),l=n(62),c=n(30),u=n(69),m=n(68),p=(n(184),n(185),n(383)),h=n(385),d=n(57);function f(e){var t={wrapperCol:{offset:8,span:16}};return s.a.createElement("div",null,s.a.createElement("h1",null,"Aroon Trivia"),s.a.createElement(p.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{onFinish:function(t){e.joinGame(t)}}),s.a.createElement(p.a.Item,{name:"room",label:"Room Code",rules:[{required:!0}]},s.a.createElement(h.a,{size:"large"})),s.a.createElement(p.a.Item,{name:"name",label:"Your Name",rules:[{required:!0}]},s.a.createElement(h.a,{size:"large"})),s.a.createElement(p.a.Item,t,s.a.createElement(d.a,{type:"primary",size:"large",htmlType:"submit"},"Join Game")),s.a.createElement(p.a.Item,t,s.a.createElement(d.a,{size:"large",onClick:function(){var t=Math.random().toString(36).substr(2,4).toUpperCase();e.createGame(t)}},"Create Game"))))}var y=n(70),g=n.n(y),b=n(97),w=n(387),E=n(382),v=n(98),S=n.n(v),q="https://aroon-trivia.azurewebsites.net",k="".concat(q,"/answer"),j="".concat(q,"/question"),O="".concat(q);function C(e){return e?"Connected":"\u274c Disconnected"}var A=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={question:"Waiting for a question...",questionStyle:"",acceptAnswers:!1,waiting:!1,connected:!1},a.submitAnswer=a.submitAnswer.bind(Object(c.a)(a)),a.answerForm=a.answerForm.bind(Object(c.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=S()(O,{path:"/register",query:{room:this.props.room,name:this.props.name},transports:["websocket"]});t.on("connect",(function(){e.setState({connected:!0})})),t.on("disconnect",(function(){e.setState({connected:!1})})),t.on("question",(function(t){console.log(t),e.setState({question:t.question,questionStyle:t.questionStyle,acceptAnswers:!0})}))}},{key:"submitAnswer",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({waiting:!0}),e.next=4,fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer:t.answer,points:t.points,room:this.props.room,player:this.props.name})});case 4:200!==(n=e.sent).status?alert("Unable to submit answer. Error message: ".concat(n.status," Response")):this.setState({question:"Answer received! Waiting for another question...",acceptAnswers:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert("Unable to submit answer. Error message: ".concat(e.t0));case 11:return e.prev=11,this.setState({waiting:!1}),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"answerForm",value:function(){var e={wrapperCol:{offset:8,span:16}};return s.a.createElement(p.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{onFinish:this.submitAnswer}),s.a.createElement(p.a.Item,{name:"answer",label:"Answer",rules:[{required:!0}]},s.a.createElement(h.a,{size:"large"})),"custom"!==this.state.questionStyle&&"pointPer"!==this.state.questionStyle?s.a.createElement(p.a.Item,{name:"points",label:"Points",rules:[{required:!0}]},s.a.createElement(w.a,{size:"large"})):null,s.a.createElement(p.a.Item,e,this.state.waiting?s.a.createElement("div",null,"Submitting answer..."):s.a.createElement(d.a,{type:"primary",size:"large",htmlType:"submit"},"Submit Answer")))}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(E.a,{title:"Game ".concat(this.props.room),onBack:this.props.goBack,subTitle:C(this.state.connected)}),s.a.createElement("h3",null,"Question"),s.a.createElement("p",null,this.state.question),this.state.acceptAnswers?this.answerForm():null)}}]),n}(s.a.Component),P=n(120),T=n(386),N=n(384),x=n(388),I=n(381),L=n(81),G=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={players:[],answers:[],question:"",questionStyle:"",waiting:!1,asked:0,connected:!1},a.mapPlayersToList=a.mapPlayersToList.bind(Object(c.a)(a)),a.mapAnswersToList=a.mapAnswersToList.bind(Object(c.a)(a)),a.adjustScore=a.adjustScore.bind(Object(c.a)(a)),a.adjustPoints=a.adjustPoints.bind(Object(c.a)(a)),a.submitQuestion=a.submitQuestion.bind(Object(c.a)(a)),a.pointAdjusters=a.pointAdjusters.bind(Object(c.a)(a)),a.applyPoints=a.applyPoints.bind(Object(c.a)(a)),a.questionForm=a.questionForm.bind(Object(c.a)(a)),a.toggleCorrect=a.toggleCorrect.bind(Object(c.a)(a)),a.waitingText=a.waitingText.bind(Object(c.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=S()(O,{path:"/register",query:{room:this.props.room+"-admin"},transports:["websocket"]});t.on("connect",(function(){e.setState({connected:!0})})),t.on("disconnect",(function(){e.setState({connected:!1})})),t.on("submission",(function(t){e.setState((function(n){if(!(n.answers.find((function(e){return e.player===t.player}))>-1))return"custom"===e.state.questionStyle?(t.points=0,t.correct=!0):"pointPer"===e.state.questionStyle?(t.points=1,t.correct=!1):t.correct=!1,{answers:[t].concat(Object(P.a)(n.answers))}}))})),t.on("join",(function(t){e.setState((function(e){if(!(e.players.find((function(e){return e.name===t}))>-1))return{players:[{name:t,score:0}].concat(Object(P.a)(e.players))}}))}))}},{key:"adjustScore",value:function(e,t){this.setState((function(n){var a=n.players.findIndex((function(t){return t.name===e})),s=JSON.parse(JSON.stringify(n.players));return s[a].score+=t,{players:s}}))}},{key:"adjustPoints",value:function(e,t){this.setState((function(n){var a=n.answers.findIndex((function(t){return t.player===e})),s=JSON.parse(JSON.stringify(n.answers));return s[a].points+=t,{answers:s}}))}},{key:"toggleCorrect",value:function(e){this.setState((function(t){var n=t.answers.findIndex((function(t){return t.player===e})),a=JSON.parse(JSON.stringify(t.answers));return a[n].correct=!a[n].correct,{answers:a}}))}},{key:"mapPlayersToList",value:function(e){var t=this;return e.sort((function(e,t){return e.score>t.score})).map((function(e){return s.a.createElement("li",{className:"list",key:e.name},s.a.createElement("strong",null,e.name),s.a.createElement("span",{className:"bump-left"},e.score),s.a.createElement(d.a,{size:"small",className:"big-bump-left",onClick:function(){return t.adjustScore(e.name,-1)}},"-"),s.a.createElement(d.a,{size:"small",onClick:function(){return t.adjustScore(e.name,1)}},"+"))}))}},{key:"mapAnswersToList",value:function(e){var t=this;return e.map((function(e){return s.a.createElement("li",{className:"list",key:e.player},s.a.createElement("h4",null,e.player),s.a.createElement("i",null,e.answer),"pointPer"!==t.state.questionStyle?s.a.createElement("strong",{className:"bump-left"},e.points):null,"custom"===t.state.questionStyle?t.pointAdjusters(e):null,"custom"!==t.state.questionStyle?s.a.createElement(T.a,{className:"big-bump-left",checked:e.correct,onChange:function(){return t.toggleCorrect(e.player)}},"Correct"):null)}))}},{key:"pointAdjusters",value:function(e){var t=this;return s.a.createElement("div",{className:"inline"},s.a.createElement(d.a,{size:"small",className:"big-bump-left",onClick:function(){return t.adjustPoints(e.player,-1)}},"-"),s.a.createElement(d.a,{size:"small",onClick:function(){return t.adjustPoints(e.player,1)}},"+"))}},{key:"applyPoints",value:function(){var e=this;this.state.answers.forEach((function(t){e.setState((function(e){var n=JSON.parse(JSON.stringify(e.players)),a=n.findIndex((function(e){return e.name===t.player}));return t.correct?("pointPer"===e.questionStyle?n[a].score+=1:n[a].score+=t.points,{players:n}):"wagerLoss"===e.questionStyle?(n[a].score-=t.points,{players:n}):void 0}))})),this.setState({answers:[],question:"",questionStyle:""})}},{key:"submitQuestion",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!0,this.state.answers.length>0&&(n=window.confirm("You haven't applied the points from the last question - are you sure you want to ask a new one?")),!n){e.next=17;break}return e.prev=3,this.setState({waiting:!0}),e.next=7,fetch(j,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:t.question,questionStyle:t.questionStyle,room:this.props.room})});case 7:200!==(a=e.sent).status?alert("Unable to submit question. Error message: ".concat(a.status," Response")):this.setState((function(e){return{asked:e.asked+1,question:t.question,questionStyle:t.questionStyle,answers:[]}})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),alert("Unable to submit question. Error message: ".concat(e.t0));case 14:return e.prev=14,this.setState({waiting:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[3,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"questionStyles",value:function(){return s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("strong",null,"Wager"),s.a.createElement("span",{className:"bump-left"},"The players choose how many points to wager on their question. If they get it right, those points are added to their score. If they get it wrong, there is no penalty.")),s.a.createElement("li",null,s.a.createElement("strong",null,"Wager with Loss"),s.a.createElement("span",{className:"bump-left"},"The players choose how many points to wager on their question. If they get it right, those points are added to their score. If they get it wrong, those points are subtracted from their score.")),s.a.createElement("li",null,s.a.createElement("strong",null,"Point-per-Question"),s.a.createElement("span",{className:"bump-left"},"The players get one point added to their scores if they get it right.")),s.a.createElement("li",null,s.a.createElement("strong",null,"Gamemaster Chooses"),s.a.createElement("span",{className:"bump-left"},"The Gamemaster chooses how many points to award each player for their answer. Great for open-ended questions!")))}},{key:"questionForm",value:function(){var e={wrapperCol:{offset:4,span:20}};return s.a.createElement(p.a,Object.assign({},{labelCol:{span:4},wrapperCol:{span:20}},{onFinish:this.submitQuestion}),s.a.createElement(p.a.Item,{name:"question",label:"Question",rules:[{required:!0}]},s.a.createElement(h.a.TextArea,null)),s.a.createElement(p.a.Item,{name:"questionStyle",label:"Question Style",rules:[{required:!0}]},s.a.createElement(N.a,{placeholder:"Select a question style..."},s.a.createElement(L.Option,{value:"wager"},"Wager"),s.a.createElement(L.Option,{value:"wagerLoss"},"Wager with Loss"),s.a.createElement(L.Option,{value:"pointPer"},"Point-per-Question"),s.a.createElement(L.Option,{value:"custom"},"Gamemaster Chooses"))),s.a.createElement(p.a.Item,e,this.state.waiting?s.a.createElement("div",null,"Submitting question..."):s.a.createElement(d.a,{type:"primary",size:"large",htmlType:"submit"},"Submit Question"),s.a.createElement(x.a,{title:"Question Styles",content:this.questionStyles(),trigger:"click"},s.a.createElement(d.a,{size:"large",className:"bump-left"},"Question Style Help"))))}},{key:"waitingText",value:function(){return""!==this.state.question?"Waiting for answers...":"Ask a question!"}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(E.a,{title:"Game ".concat(this.props.room),onBack:this.props.goBack,subTitle:C(this.state.connected)}),s.a.createElement(I.a,{title:"Players",extra:"".concat(this.state.players.length)},s.a.createElement("ul",null,this.mapPlayersToList(this.state.players))),s.a.createElement(I.a,{title:"Answers",extra:"".concat(this.state.answers.length,"/").concat(this.state.players.length)},""!==this.state.question?s.a.createElement("p",null,s.a.createElement("strong",null,function(e){switch(e){case"wager":return"Wager";case"wagerLoss":return"Wager with Loss";case"pointPer":return"Point-per-Question";case"custom":return"Gamemaster Chooses";default:return""}}(this.state.questionStyle))," - ",this.state.question):null,s.a.createElement("ul",null,this.mapAnswersToList(this.state.answers)),this.state.answers.length>0?s.a.createElement(d.a,{size:"large",type:"primary",onClick:this.applyPoints},"Apply Points"):s.a.createElement("i",null,this.waitingText())),s.a.createElement(I.a,{title:"Question",extra:"".concat(this.state.asked," question").concat(1===this.state.asked?"":"s"," asked")},this.questionForm()))}}]),n}(s.a.Component),z=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={room:"",name:"",page:"login"},a.loadGame=a.loadGame.bind(Object(c.a)(a)),a.loadAdmin=a.loadAdmin.bind(Object(c.a)(a)),a.loadLogin=a.loadLogin.bind(Object(c.a)(a)),a}return Object(l.a)(n,[{key:"loadGame",value:function(e){this.setState({room:e.room,name:e.name,page:"game"})}},{key:"loadAdmin",value:function(e){this.setState({room:e,page:"admin"})}},{key:"loadLogin",value:function(){this.setState({page:"login"})}},{key:"render",value:function(){switch(this.state.page){case"admin":return s.a.createElement(G,{room:this.state.room,goBack:this.loadLogin});case"game":return s.a.createElement(A,{room:this.state.room,name:this.state.name,goBack:this.loadLogin});default:return s.a.createElement(f,{joinGame:this.loadGame,createGame:this.loadAdmin})}}}]),n}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[178,1,2]]]);
//# sourceMappingURL=main.9dfa7f13.chunk.js.map